---
// src\layouts\BlogLayout.astro
import MainLayout from "./MainLayout.astro";
import type { CollectionEntry } from "astro:content";


interface Props {
  post: CollectionEntry<"blog">;
}

const { post } = Astro.props;
const { title, description, date, tags, image } = post.data;
---

<MainLayout title={title} description={description} image={image}>
  <article class="blog-article">
    <header class="blog-header">
      <h1 class="blog-title">{title}</h1>
      {description && <p class="blog-description">{description}</p>}

      <div class="blog-meta">
        <time datetime={date.toISOString()}>
          {date.toLocaleDateString("es-AR", {
            year: "numeric",
            month: "long",
            day: "numeric",
          })}
        </time>

        {tags && tags.length > 0 && (
          <nav aria-label="Etiquetas de la entrada">
            <ul class="blog-tags" role="list">
              {tags.map((tag: string) => (
                <li>
                  <a href={`/blog/${tag}`} aria-label={`Ver posts con la etiqueta ${tag}`}>
                    {tag}
                  </a>
                </li>
              ))}
            </ul>
          </nav>
        )}
      </div>

      {image && (
        <figure>
          <img class="blog-cover" src={image} alt={`Imagen de portada del artículo: ${title}`} />
        </figure>
      )}
    </header>

    <section class="blog-content">
      <slot />
    </section>

    <!-- CTA al final del post -->
  <div class="blog-cta">
    <p>
      Si te interesa este tema o querés asesoramiento personalizado, 
      <a href="/contacto">contactanos</a>. Estamos para ayudarte y aclarar todas tus dudas.
    </p>
  </div>
  </article>
</MainLayout>

<style>
.blog-article {
  font-family: var(--font-sans);
  line-height: 1.75;
  font-size: var(--step-0);
  color: var(--color-text, #1e293b);
  max-width: 800px;
  margin-inline: auto;
  padding: 2rem 1rem;
}

@media (min-width: 960px) {
  .blog-article {
    padding: 3rem 0;
  }
}

.blog-title {
  font-family: var(--font-serif);
  font-size: var(--step-4);
  font-weight: 800;
  color: var(--color-title, #0f172a);
  margin-bottom: 0.5rem;
}

.blog-description {
  font-size: var(--step-1);
  color: var(--color-muted);
  margin-bottom: 1rem;
}

.blog-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  align-items: center;
  font-size: 0.95rem;
  color: var(--color-meta, #64748b);
  margin-bottom: 1.5rem;
}

.blog-tags {
  display: flex;
  flex-wrap: wrap; /* permite que las etiquetas hagan wrap */
  gap: 0.5rem 0.75rem; /* espacio horizontal y vertical */
  margin: 0;
  padding: 0;
  list-style: none;
}

.blog-tags a {
  background: var(--brand-1);
  color: var(--on-brand);
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.85rem;
  font-weight: 600;
  transition: filter 0.2s ease, background 0.2s ease;
}

.blog-tags a:hover {
  filter: brightness(1.1);
}

.blog-content :global(h2) {
  font-size: var(--step-2);
  font-weight: 700;
  margin-top: 2rem;
  margin-bottom: 0.5rem;
  color: var(--color-title);
}

.blog-content :global(h3) {
  font-size: var(--step-1);
  font-weight: 600;
  margin-top: 1.5rem;
  margin-bottom: 0.5rem;
}

.blog-content :global(p) {
  margin: 1rem 0;
  line-height: 1.75;
}

.blog-content :global(strong) {
  color: var(--brand-1);
  font-weight: 700;
}

.blog-content :global(a) {
  color: var(--brand-2);
  text-decoration: underline;
  transition: filter 0.2s ease;
  font-weight: 600;
}

.blog-content :global(a:hover) {
  filter: brightness(1.1);
  color: var(--brand-1);
}

.blog-content :global(img) {
  width: 100%;
  max-height: 500px;
  object-fit: cover;
  border-radius: var(--radius-1);
  margin: 1.5rem 0;
}

.blog-content :global(blockquote) {
  border-left: 4px solid var(--brand-1);
  padding-left: 1rem;
  margin: 1.5rem 0;
  font-style: italic;
  color: var(--color-muted);
  background: var(--color-surface);
  border-radius: var(--radius-1);
}

.blog-content :global(code) {
  background: var(--color-surface);
  padding: 0.2rem 0.5rem;
  border-radius: var(--radius-1);
  font-size: 0.9rem;
  font-family: monospace;
}

/* CTA al final del post */
.blog-cta {
  margin-top: 3rem;
  padding-top: 1.5rem;
  border-top: 2px solid var(--brand-1);
  font-weight: 600;
  color: var(--color-text);
}

.blog-cta a {
  color: var(--brand-2);
  text-decoration: underline;
  transition: filter 0.2s ease;
}

.blog-cta a:hover {
  filter: brightness(1.1);
  color: var(--brand-1);
}

</style>
